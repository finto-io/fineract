<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="finto" id="1">
        <insert tableName="x_registered_table">
            <column name="registered_table_name" value="account_fields"/>
            <column name="application_table_name" value="m_savings_account"/>
            <column name="entity_subtype" value="account_fields"/>
            <column name="category" valueNumeric="200"/>
        </insert>
        <createTable tableName="account_fields">
            <column autoIncrement="true" name="savings_account_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValueComputed="NULL" name="iban" type="VARCHAR(50)"/>
            <column defaultValueComputed="NULL" name="external_integration_success" type="BOOLEAN"/>
            <column defaultValueComputed="NULL" name="external_source" type="VARCHAR(50)"/>
            <column defaultValueComputed="NULL" name="integration_failure_type" type="VARCHAR(255)"/>
            <column defaultValueComputed="NULL" name="swift" type="VARCHAR(255)"/>
            <column defaultValueComputed="NULL" name="external_account_number" type="VARCHAR(255)"/>
            <column defaultValueComputed="NULL" name="external_account_name" type="VARCHAR(255)"/>
            <column defaultValueComputed="NULL" name="external_branch" type="VARCHAR(255)"/>
        </createTable>
        <insert tableName="m_savings_product">
            <column name="id" valueNumeric="1"/>
            <column name="name" value="Regular Account"/>
            <column name="short_name" value="RG01"/>
            <column name="description" value="Regular Account"/>
            <column name="deposit_type_enum" valueNumeric="100"/>
            <column name="currency_code" value="JOD"/>
            <column name="currency_digits" valueNumeric="3"/>
            <column name="currency_multiplesof" valueNumeric="0"/>
            <column name="nominal_annual_interest_rate" valueNumeric="0.000000"/>
            <column name="interest_compounding_period_enum" valueNumeric="1"/>
            <column name="interest_posting_period_enum" valueNumeric="4"/>
            <column name="interest_calculation_type_enum" valueNumeric="1"/>
            <column name="interest_calculation_days_in_year_type_enum" valueNumeric="365"/>
            <column name="min_required_opening_balance"/>
            <column name="lockin_period_frequency"/>
            <column name="lockin_period_frequency_enum"/>
            <column name="accounting_type" valueNumeric="1"/>
            <column name="withdrawal_fee_amount"/>
            <column name="withdrawal_fee_type_enum"/>
            <column name="withdrawal_fee_for_transfer" valueBoolean="true"/>
            <column name="allow_overdraft" valueBoolean="false"/>
            <column name="overdraft_limit" valueNumeric="0.000000"/>
            <column name="nominal_annual_interest_rate_overdraft" valueNumeric="0.000000"/>
            <column name="min_overdraft_for_interest_calculation" valueNumeric="0.000000"/>
            <column name="min_required_balance" valueNumeric="0.000000"/>
            <column name="enforce_min_required_balance" valueBoolean="false"/>
            <column name="min_balance_for_interest_calculation"/>
            <column name="withhold_tax" valueBoolean="false"/>
            <column name="tax_group_id"/>
            <column name="is_dormancy_tracking_active"/>
            <column name="days_to_inactive"/>
            <column name="days_to_dormancy"/>
            <column name="days_to_escheat"/>
            <column name="max_allowed_lien_limit"/>
            <column name="is_lien_allowed" valueBoolean="false"/>
        </insert>
        <sql>
            SELECT SETVAL('m_savings_product_id_seq', COALESCE(MAX(id), 0)+1, false ) FROM m_savings_product;
        </sql>
    </changeSet>
</databaseChangeLog>
